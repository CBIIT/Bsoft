<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Bsoft: /usr/local/bsoft/include/img_powerspectrum.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Bsoft_icon128.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bsoft
   &#160;<span id="projectnumber">1.9</span>
   </div>
   <div id="projectbrief">Bernard&#39;s software package</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('img__powerspectrum_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">img_powerspectrum.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for calculating and using power spectra.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="rwimg_8h_source.html">rwimg.h</a>&quot;</code><br />
</div>
<p><a href="img__powerspectrum_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a546243f792ff6c90056ebac8ca97b0fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="img__powerspectrum_8h.html#a546243f792ff6c90056ebac8ca97b0fe">img_power_spectrum</a> (<a class="el" href="class_bimage.html">Bimage</a> *p, int flags)</td></tr>
<tr class="memdesc:a546243f792ff6c90056ebac8ca97b0fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates a power spectrum.  <a href="#a546243f792ff6c90056ebac8ca97b0fe">More...</a><br /></td></tr>
<tr class="separator:a546243f792ff6c90056ebac8ca97b0fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e1753b3cfbc8c2ca2389abf454c333a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="img__powerspectrum_8h.html#a5e1753b3cfbc8c2ca2389abf454c333a">img_tiled_powerspectrum</a> (<a class="el" href="class_bimage.html">Bimage</a> *p, <a class="el" href="singleton_vector3.html">Vector3</a>&lt; int &gt; tile_size, int flags)</td></tr>
<tr class="memdesc:a5e1753b3cfbc8c2ca2389abf454c333a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares an image for determining CTF parameters.  <a href="#a5e1753b3cfbc8c2ca2389abf454c333a">More...</a><br /></td></tr>
<tr class="separator:a5e1753b3cfbc8c2ca2389abf454c333a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89687feff9b6a1d031f6e1dd69034950"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="img__powerspectrum_8h.html#a89687feff9b6a1d031f6e1dd69034950">img_tilt_axis_powerspectrum</a> (<a class="el" href="class_bimage.html">Bimage</a> *p, <a class="el" href="singleton_vector3.html">Vector3</a>&lt; int &gt; tile_size, double tilt_axis, double tilt_offset, int flags)</td></tr>
<tr class="memdesc:a89687feff9b6a1d031f6e1dd69034950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares an tilted image for determining CTF parameters.  <a href="#a89687feff9b6a1d031f6e1dd69034950">More...</a><br /></td></tr>
<tr class="separator:a89687feff9b6a1d031f6e1dd69034950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a15e2387865352e9137b3222c63656b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="img__powerspectrum_8h.html#a6a15e2387865352e9137b3222c63656b">img_colour_power_spectrum</a> (<a class="el" href="class_bimage.html">Bimage</a> *p, float scale)</td></tr>
<tr class="memdesc:a6a15e2387865352e9137b3222c63656b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a power spectrum with phases coloured according to a colour wheel.  <a href="#a6a15e2387865352e9137b3222c63656b">More...</a><br /></td></tr>
<tr class="separator:a6a15e2387865352e9137b3222c63656b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for calculating and using power spectra. </p>
<dl class="section author"><dt>Author</dt><dd>Bernard Heymann </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Created: 20000426 Modified: 20130807 </dd></dl>

<p>Definition in file <a class="el" href="img__powerspectrum_8h_source.html">img_powerspectrum.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6a15e2387865352e9137b3222c63656b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_bimage.html">Bimage</a>* img_colour_power_spectrum </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a power spectrum with phases coloured according to a colour wheel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*p</td><td>image. </td></tr>
    <tr><td class="paramname">scale</td><td>amplitude scaling. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Bimage* color power spectrum. <pre class="fragment">A polar data type image (such as a Fourier transform) is converted
to indicate the phases as colours. The primary colours are located
0 degrees (red), 120 degrees (green) and -120 degrees (blue). All
three colour values are down-weighted based on the amplitude. The
weighting is calculated as:
    weight = amplitude/(average+2*standard_deviation)
The origin specified in the image is used to shift the phases.
The scale is multiplied with the amplitude and cut off at one
to give the user the ability to enhance the image.
Default:
    scale = 1/(average_amplitude + standard_deviation_of_amplitude) </pre> </dd></dl>

<p>Definition at line <a class="el" href="img__powerspectrum_8cpp_source.html#l00255">255</a> of file <a class="el" href="img__powerspectrum_8cpp_source.html">img_powerspectrum.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a546243f792ff6c90056ebac8ca97b0fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int img_power_spectrum </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates a power spectrum. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*p</td><td>image structure. </td></tr>
    <tr><td class="paramname">flags</td><td>1=norm, 2=avg, 4=shift, 8=log. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int error code. <pre class="fragment">All the sub-images are Fourier transformed.
The flags variable controls options base don which bits are set:
    1   normalize image before transformation
    2   average all power spectra
    4   shift the origin to the center
    8   calculate the logarithm of the power spectrum</pre> </dd></dl>

<p>Definition at line <a class="el" href="img__powerspectrum_8cpp_source.html#l00035">35</a> of file <a class="el" href="img__powerspectrum_8cpp_source.html">img_powerspectrum.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5e1753b3cfbc8c2ca2389abf454c333a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_bimage.html">Bimage</a>* img_tiled_powerspectrum </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="singleton_vector3.html">Vector3</a>&lt; int &gt;&#160;</td>
          <td class="paramname"><em>tile_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares an image for determining CTF parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*p</td><td>image structure. </td></tr>
    <tr><td class="paramname">tile_size</td><td>tile size (if (0,0,0) don't tile). </td></tr>
    <tr><td class="paramname">flags</td><td>1=norm, 2=avg, 4=shift, 8=log. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Bimage* power spectrum. <pre class="fragment">A large single image (a micrograph) is converted to a number of tiles
packed into a multi-image structure, while a multi-image structure
(picked particles) is used as is.
Extreme values in the image are set to the average - this is to eliminate
most of the edges and number panels in micrographs.
All the sub-images are Fourier transformed.</pre> </dd></dl>

<p>Definition at line <a class="el" href="img__powerspectrum_8cpp_source.html#l00084">84</a> of file <a class="el" href="img__powerspectrum_8cpp_source.html">img_powerspectrum.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a89687feff9b6a1d031f6e1dd69034950"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_bimage.html">Bimage</a>* img_tilt_axis_powerspectrum </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="singleton_vector3.html">Vector3</a>&lt; int &gt;&#160;</td>
          <td class="paramname"><em>tile_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tilt_axis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tilt_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares an tilted image for determining CTF parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*p</td><td>image structure. </td></tr>
    <tr><td class="paramname">tile_size</td><td>tile size (if (0,0,0) don't tile). </td></tr>
    <tr><td class="paramname">tilt_axis</td><td>tilt axis angle (in radians). </td></tr>
    <tr><td class="paramname">tilt_offset</td><td>offset perpendicular to tilt axis (in pixels). </td></tr>
    <tr><td class="paramname">flags</td><td>1=norm, 2=avg, 4=shift, 8=log. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Bimage* power spectrum. <pre class="fragment">A large single image (a micrograph) is converted to a number of tiles
along the tilt axis packed into a multi-image structure.
Extreme values in the image are set to the average - this is to eliminate
most of the edges and number panels in micrographs.
All the sub-images are Fourier transformed.</pre> </dd></dl>

<p>Definition at line <a class="el" href="img__powerspectrum_8cpp_source.html#l00161">161</a> of file <a class="el" href="img__powerspectrum_8cpp_source.html">img_powerspectrum.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="img__powerspectrum_8h.html">img_powerspectrum.h</a></li>
    <li class="footer">Generated on Mon Jul 13 2015 18:45:01 for Bsoft by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
