<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Bsoft: /usr/local/bsoft/include/img_backproject.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Bsoft_icon128.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bsoft
   &#160;<span id="projectnumber">1.9</span>
   </div>
   <div id="projectbrief">Bernard&#39;s software package</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('img__backproject_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">img_backproject.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for 3D reconstruction by backprojection.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="rwimg_8h_source.html">rwimg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mg__processing_8h_source.html">mg_processing.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="img__fourier_8h_source.html">img_fourier.h</a>&quot;</code><br />
</div>
<p><a href="img__backproject_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fb7b11fcca31a414f78d52a84025b39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="img__backproject_8h.html#a4fb7b11fcca31a414f78d52a84025b39">project_back_projection</a> (<a class="el" href="struct_bproject.html">Bproject</a> *<a class="el" href="tcltk__bshow_8cpp.html#aea438e09dfc03683a0f49a05e9a69cac">project</a>, int num_select, <a class="el" href="singleton_vector3.html">Vector3</a>&lt; int &gt; map_size, <a class="el" href="singleton_vector3.html">Vector3</a>&lt; float &gt; sampling, double scale, double resolution)</td></tr>
<tr class="memdesc:a4fb7b11fcca31a414f78d52a84025b39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Back projects a set of 2D images into a 3D volume.  <a href="#a4fb7b11fcca31a414f78d52a84025b39">More...</a><br /></td></tr>
<tr class="separator:a4fb7b11fcca31a414f78d52a84025b39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afde5114eb26b09b561b1c3b6a7f0f08b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="img__backproject_8h.html#afde5114eb26b09b561b1c3b6a7f0f08b">img_back_project_one</a> (<a class="el" href="class_bimage.html">Bimage</a> *p, <a class="el" href="class_bimage.html">Bimage</a> *pmap)</td></tr>
<tr class="memdesc:afde5114eb26b09b561b1c3b6a7f0f08b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Back-projects a 2D image into a 3D volume.  <a href="#afde5114eb26b09b561b1c3b6a7f0f08b">More...</a><br /></td></tr>
<tr class="separator:afde5114eb26b09b561b1c3b6a7f0f08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70467db7503cd3af277b364609a35e6f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="img__backproject_8h.html#a70467db7503cd3af277b364609a35e6f">img_weigh_transform</a> (<a class="el" href="class_bimage.html">Bimage</a> *p, double resolution, double threshold)</td></tr>
<tr class="memdesc:a70467db7503cd3af277b364609a35e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Weighs a transform with the FOM.  <a href="#a70467db7503cd3af277b364609a35e6f">More...</a><br /></td></tr>
<tr class="separator:a70467db7503cd3af277b364609a35e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f4fb06748484c061776a1b47e3e73e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="img__backproject_8h.html#aa0f4fb06748484c061776a1b47e3e73e">img_backprojection_weigh</a> (<a class="el" href="class_bimage.html">Bimage</a> **pacc, int imap, int nmaps, int nthreads, double resolution, double threshold, <a class="el" href="fft_8h.html#a195a5eedf2ee4171d58b4fe33e93c80d">fft_plan</a> planf, <a class="el" href="fft_8h.html#a195a5eedf2ee4171d58b4fe33e93c80d">fft_plan</a> planb)</td></tr>
<tr class="memdesc:aa0f4fb06748484c061776a1b47e3e73e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accumulates multiple backprojections and weighs the transform with the FOM.  <a href="#aa0f4fb06748484c061776a1b47e3e73e">More...</a><br /></td></tr>
<tr class="separator:aa0f4fb06748484c061776a1b47e3e73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for 3D reconstruction by backprojection. </p>
<dl class="section author"><dt>Author</dt><dd>Bernard Heymann </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Created: 20010414 Modified: 20121101 </dd></dl>

<p>Definition in file <a class="el" href="img__backproject_8h_source.html">img_backproject.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afde5114eb26b09b561b1c3b6a7f0f08b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int img_back_project_one </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td>
          <td class="paramname"><em>pmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Back-projects a 2D image into a 3D volume. </p>
<dl class="section author"><dt>Author</dt><dd>Bernard Heymann and Peter Leong </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*p</td><td>a 2D image. </td></tr>
    <tr><td class="paramname">*pmap</td><td>the 3D volume. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0. <pre class="fragment">Requirements:
    The first image must be 2D with the orientation parameters in
        the sub-image structure.
    The orientation parameters are defined as those giving the projection,
        and is reversed for backprojection.
    The second image must be 3D and properly initialized.
The 2D image is converted to floating point and rescaled to an average
of zero and a standard deviation of one. The 3D map is traversed and
the density added from the 2D image projected according to the orientation
parameters. The origin of the new map is in the center of the volume.</pre> </dd></dl>

<p>Definition at line <a class="el" href="img__backproject_8cpp_source.html#l00163">163</a> of file <a class="el" href="img__backproject_8cpp_source.html">img_backproject.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa0f4fb06748484c061776a1b47e3e73e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_bimage.html">Bimage</a>* img_backprojection_weigh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_bimage.html">Bimage</a> **&#160;</td>
          <td class="paramname"><em>pacc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>imap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nmaps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nthreads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fft_8h.html#a195a5eedf2ee4171d58b4fe33e93c80d">fft_plan</a>&#160;</td>
          <td class="paramname"><em>planf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fft_8h.html#a195a5eedf2ee4171d58b4fe33e93c80d">fft_plan</a>&#160;</td>
          <td class="paramname"><em>planb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accumulates multiple backprojections and weighs the transform with the FOM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">**pacc</td><td>array of partial maps with linked weight maps. </td></tr>
    <tr><td class="paramname">imap</td><td>which output map to weigh. </td></tr>
    <tr><td class="paramname">nmaps</td><td>number of output maps (1,2,3). </td></tr>
    <tr><td class="paramname">nthreads</td><td>number of threads per map (= number of partial maps). </td></tr>
    <tr><td class="paramname">resolution</td><td>high resolution limit. </td></tr>
    <tr><td class="paramname">threshold</td><td>low weight cutoff. </td></tr>
    <tr><td class="paramname">planf</td><td>forward Fourier transform plan. </td></tr>
    <tr><td class="paramname">planb</td><td>backward Fourier transform plan. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0. <pre class="fragment">Requirements:
    The FOM block contains the weights.</pre> </dd></dl>

<p>Definition at line <a class="el" href="img__backproject_8cpp_source.html#l00331">331</a> of file <a class="el" href="img__backproject_8cpp_source.html">img_backproject.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a70467db7503cd3af277b364609a35e6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int img_weigh_transform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_bimage.html">Bimage</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Weighs a transform with the FOM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*p</td><td>a 2D image. </td></tr>
    <tr><td class="paramname">resolution</td><td>high resolution limit. </td></tr>
    <tr><td class="paramname">threshold</td><td>low weight cutoff. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0. <pre class="fragment">Requirements:
    The data must be complex float and the FOM block must be allocated.</pre> </dd></dl>

<p>Definition at line <a class="el" href="img__backproject_8cpp_source.html#l00256">256</a> of file <a class="el" href="img__backproject_8cpp_source.html">img_backproject.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4fb7b11fcca31a414f78d52a84025b39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_bimage.html">Bimage</a>* project_back_projection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_bproject.html">Bproject</a> *&#160;</td>
          <td class="paramname"><em>project</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="singleton_vector3.html">Vector3</a>&lt; int &gt;&#160;</td>
          <td class="paramname"><em>map_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="singleton_vector3.html">Vector3</a>&lt; float &gt;&#160;</td>
          <td class="paramname"><em>sampling</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>resolution</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Back projects a set of 2D images into a 3D volume. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*project</td><td>image processing parameter structure. </td></tr>
    <tr><td class="paramname">num_select</td><td>selection number from the selection column. </td></tr>
    <tr><td class="paramname">map_size</td><td>3-valued vector for the new map size. </td></tr>
    <tr><td class="paramname">sampling</td><td>3-value vector for the voxel size in angstrom. </td></tr>
    <tr><td class="paramname">scale</td><td>reconstruction scale. </td></tr>
    <tr><td class="paramname">resolution</td><td>resolution for low-pass filtering. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Bimage* the new 3D reconstruction map. <pre class="fragment">All the information needed to do a 3D reconstruction is passed in through
an image processing structure. The new 3D volume is initialized.
Each sub-image in each particle file is read individually and 
back-projected within the new volume. The orientation parameters from
the image processing structure is transferred to the sub-image
structure in the 2D image before calling the function packing one
image into the volume. The default origin is the center of the image.</pre> </dd></dl>

<p>Definition at line <a class="el" href="img__backproject_8cpp_source.html#l00039">39</a> of file <a class="el" href="img__backproject_8cpp_source.html">img_backproject.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="img__backproject_8h.html">img_backproject.h</a></li>
    <li class="footer">Generated on Thu Aug 13 2015 18:46:48 for Bsoft by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
