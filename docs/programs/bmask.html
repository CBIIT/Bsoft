<HTML>
<HEAD>
	<meta name="Author" content="Bernard Heymann">
	<TITLE>Bsoft: bmask </TITLE>
	<link type="image/png" href="Bsoft_16x16.png" rel="icon">
</HEAD>
<BODY bgcolor="#FFFFFF">
<h2><i><font color="#000099">Bsoft program</font></i></h2>
<center><h1><font color="#FF0000">bmask</font></h1></center>  <h3>Usage: bmask [options] input.img output.img</h3>
Generates and uses binary masks of the size given or of the input image. <br>
The selected regions have value 1 and the omitted regions 0. The default is a blank mask created of the same size as the input image.   <h3>Actions for mask creation:</h3>
<table><tbody>
<tr><td>-create 20,60,30</td><td>Create a new mask of this size in place of input image</td></tr>
<tr><td>-threshold -0.55,1.2</td><td>One or more thresholds to generate a mask.</td></tr>
<tr><td>-variance 5,1</td><td>Generate mask based on local variance in a kernel of a given size,</td></tr>
<tr><td></td><td>                         and flag to generate a background with value -1.</td></tr>
<tr><td></td><td> </td></tr>
</tbody></table><br>
<h3>Actions for mask modification:</h3>
<table><tbody>
<tr><td>-invert</td><td>Invert mask.</td></tr>
<tr><td>-dilate 2</td><td>Dilate mask a number of times.</td></tr>
<tr><td>-erode 3</td><td>Erode mask a number of times.</td></tr>
<tr><td>-open 4</td><td>Open (erode-dilate) mask a number of times.</td></tr>
<tr><td>-close 2</td><td>Close (dilate-erode) mask a number of times.</td></tr>
<tr><td>-hole 3,56,23</td><td>Fill a hole indicated by the voxel.</td></tr>
<tr><td>-plane</td><td>0.3,0.5,-0.1,0,3,25 Mask on one side of a plane with the given normal and origin.</td></tr>
<tr><td>-rectangle 40,20,45</td><td>Rectangular mask with given length, width and rotation angle.</td></tr>
<tr><td>-radius 10,45</td><td>Generate a mask inside these radii.</td></tr>
<tr><td>-asu D3</td><td>Generate an asymmetric unit mask.</td></tr>
<tr><td>-color size</td><td>Generate a RGBA image (random/size).</td></tr>
<tr><td>-size</td><td>Convert level mask to region size map.</td></tr>
<tr><td></td><td> </td></tr>
</tbody></table><br>
<h3>Actions for multi-level masks:</h3>
<table><tbody>
<tr><td>-collapse</td><td>Convert a multi-level mask to a binary mask.</td></tr>
<tr><td>-select 1,5-7</td><td>Select levels in a multi-level mask.</td></tr>
<tr><td>-voxel 23,241,193</td><td>Select the level including this voxel.</td></tr>
<tr><td>-level 134</td><td>Convert a mask to multiple levels, with the given voxels per level.</td></tr>
<tr><td>-bands 250,-1,150,1,30,0</td><td>Banded mask for reciprocal space (pairs of numbers: angstrom,value).</td></tr>
<tr><td></td><td>                         Band with 0: Not used.</td></tr>
<tr><td></td><td>                         Band with 1: Use for orientation determination.</td></tr>
<tr><td></td><td>                         Band with -1: Use for cross-validation.</td></tr>
<tr><td></td><td> </td></tr>
</tbody></table><br>
<h3>Actions for mask application:</h3>
<table><tbody>
<tr><td>-apply</td><td>Apply the mask to the input image (default output mask).</td></tr>
<tr><td>-rescaleapply 0.5,2.3</td><td>Rescale region inside mask and apply the mask to the input image.</td></tr>
<tr><td></td><td> </td></tr>
</tbody></table><br>
<h3>Parameters:</h3>
<table><tbody>
<tr><td>-verbose 1</td><td>Verbosity of output.</td></tr>
<tr><td>-datatype u</td><td>Force writing of a new data type.</td></tr>
<tr><td>-sampling 1.5,1.5,1.5</td><td>Sampling (A/pixel; a single value can be given).</td></tr>
<tr><td>-origin 110,50,44</td><td>Origin for the mask (default from input image).</td></tr>
<tr><td>-fill 28.3</td><td>Fill value (default average).</td></tr>
<tr><td>-wrap</td><td>Flag to wrap around image boundaries (default not).</td></tr>
<tr><td></td><td> </td></tr>
</tbody></table><br>
<h3>Input:</h3>
<table><tbody>
<tr><td>-Mask file.img</td><td>Input mask to apply or get difference with main input image.</td></tr>
<tr><td></td><td> </td></tr>
</tbody></table><br>
<h3>Examples:</h3>
<table><tbody>
<tr><td></td><td>1.	Creating a new mask:</td></tr>
<tr><td></td><td>		bmask -v 7 -create 100,100,50 -radius 10,20 -origin 50,50,25 mask.mrc</td></tr>
<tr><td></td><td> </td></tr>
<tr><td></td><td>2.	Generating a mask from an image:</td></tr>
<tr><td></td><td>		bmask -v 7 -threshold 1.5 test.map mask.mrc</td></tr>
<tr><td></td><td> </td></tr>
<tr><td></td><td>3.	Applying a mask to an image:</td></tr>
<tr><td></td><td>		bmask -v 7 -Mask mask.mrc test.map new.map</td></tr>
<tr><td></td><td> </td></tr>
<tr><td></td><td>4.	Generating and applying a mask to an image:</td></tr>
<tr><td></td><td>		bmask -v 7 -apply -radius 50,80 -origin 100,100,100 test.map new.map</td></tr>
<tr><td></td><td> </td></tr>
</tbody></table>
<br>Bsoft version 2.0.7-20200917 (64 bit)<br>
<HR WIDTH="100%"><BR>
Generated by bdoc.pl on Mon Oct 26 08:20:11 2020 <BR>
<HR WIDTH="100%"><BR>
<center><a href="bsoft.html">Back to the Bsoft home</a></center>
<HR WIDTH="100%"><BR>
</BODY>
</HTML>
