<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bsoft: /Users/bernard/b20/bsoft/src/rwmodel/rwmodel_bild.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Bsoft_icon128.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bsoft
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
   <div id="projectbrief">Bernard&#39;s software package</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('rwmodel__bild_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">rwmodel_bild.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="rwmodel__bild_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rwmodel_8h.html">rwmodel.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="model__neighbors_8h.html">model_neighbors.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="model__poly_8h.html">model_poly.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_color_8h.html">Color.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__util_8h.html">string_util.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="utilities_8h.html">utilities.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timer_8h.html">timer.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// Declaration of global variables</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span>  <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a>;        <span class="comment">// Level of output to the screen</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">   22</a></span>&#160;<a class="code" href="class_bcomponent.html">Bcomponent</a>* <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(<a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> loc, <a class="code" href="class_bcomponent.html">Bcomponent</a>** comp, <span class="keywordtype">int</span> &amp;number)</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;{</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="class_bstring.html">Bstring</a>         id;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp1 = *comp;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keywordflow">if</span> ( comp1 ) comp1 = comp1-&gt;<a class="code" href="class_bcomponent.html#abb61a534cb936a886572f37bad3dd788">find_closest</a>(loc);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//  for ( comp1 = *comp; comp1; comp1 = comp1-&gt;next )</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//      if ( comp1-&gt;loc.distance(loc) &lt; 0.001 ) break;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">if</span> ( !comp1 ) {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//      id = Bstring(++number, &quot;%d&quot;);</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//      comp1 = component_add(comp, id);</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keywordflow">if</span> ( *comp ) comp1 = (*comp)-&gt;<a class="code" href="class_bcomponent.html#a1d005b81054dc10d00097ba6c5b5ddb8">add</a>(++number);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keywordflow">else</span> *comp = comp1 = <span class="keyword">new</span> <a class="code" href="class_bcomponent.html">Bcomponent</a>(++number);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        comp1-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>(loc);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    }</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">return</span> comp1;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="rwmodel__bild_8h.html#a4860aaca357985b9d9efce7a48ad70ee">   47</a></span>&#160;<a class="code" href="class_bmodel.html">Bmodel</a>*     <a class="code" href="rwmodel__bild_8cpp.html#a4860aaca357985b9d9efce7a48ad70ee">read_model_bild</a>(<a class="code" href="class_bstring.html">Bstring</a>* <a class="code" href="file__util_8h.html#ad4d6fa0365303d7ddecf8756c82cb6a8">file_list</a>)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">int</span>             i, j, nc, first_comment;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="class_bmodel.html">Bmodel</a>*         <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a> = NULL;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="class_bmodel.html">Bmodel</a>*         mp = NULL;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp = NULL;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp1 = NULL;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp2 = NULL;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="class_blink.html">Blink</a>*          link = NULL;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="class_bstring.html">Bstring</a>         id, line;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="class_bstring.html">Bstring</a>*        filename;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="class_bstring.html">Bstring</a>         *tokens, *token;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    ifstream        fmod;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">char</span>            aline[1024];</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="class_r_g_b_a.html">RGBA&lt;float&gt;</a>     rgba(1,1,1,1);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> loc, vec;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">for</span> ( i=1, filename = <a class="code" href="file__util_8h.html#ad4d6fa0365303d7ddecf8756c82cb6a8">file_list</a>; filename; filename = filename-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>, i++ ) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> &amp; <a class="code" href="utilities_8h.html#a0472bdfea57c833b4eaba94f1ee0b781">VERB_LABEL</a> )</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            cout &lt;&lt; <span class="stringliteral">&quot;Reading file:                   &quot;</span> &lt;&lt; *filename &lt;&lt; endl;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        first_comment = 1;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        fmod.open(filename-&gt;<a class="code" href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">c_str</a>());</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">if</span> ( fmod.fail() ) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordtype">id</span> = <a class="code" href="class_bstring.html">Bstring</a>(i, <span class="stringliteral">&quot;%d&quot;</span>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//      mp = model_add(&amp;mp, id);</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//      if ( !model ) model = mp;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a> ) mp = mp-&gt;<a class="code" href="class_bmodel.html#a00bb9a087d55a0c54f591ecee085baa4">add</a>(i);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">else</span> mp = <span class="keyword">new</span> <a class="code" href="class_bmodel.html">Bmodel</a>(i);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        link = NULL;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        comp = NULL;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        nc = 0;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">while</span> ( fmod.getline(aline, 1024) ) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            line = aline;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> &amp; <a class="code" href="utilities_8h.html#a65f0019f3f7f7b04cd45d68f60afe385">VERB_DEBUG</a> )</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                cout &lt;&lt; <span class="stringliteral">&quot;DEBUG read_model_bild: &quot;</span> &lt;&lt; line &lt;&lt; endl;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            tokens = line.<a class="code" href="class_bstring.html#ad1e8da6164aa13fc0dccb5af0e3f8c8f">split</a>();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordflow">if</span> ( tokens ) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> &amp; <a class="code" href="utilities_8h.html#a65f0019f3f7f7b04cd45d68f60afe385">VERB_DEBUG</a> )</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                    cout &lt;&lt; <span class="stringliteral">&quot;DEBUG read_model_bild: &quot;</span> &lt;&lt; *tokens;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.comment&quot;</span> ) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                    <span class="keywordflow">if</span> ( first_comment ) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                        <span class="keywordflow">for</span> ( token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token; token = token-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a> )</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                            mp-&gt;<a class="code" href="class_bmodel.html#ac46df65365b2b4d8ec0a6e1fb4106af6">comment</a>() += token-&gt;<a class="code" href="class_bstring.html#aac78c0e3f4d58a618dc0a1224c49e81c">str</a>() + <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                        first_comment = 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                    }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.color&quot;</span> ) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> &amp; <a class="code" href="utilities_8h.html#a65f0019f3f7f7b04cd45d68f60afe385">VERB_DEBUG</a> )</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                        cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *(tokens-&gt;next);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="keywordflow">if</span> ( isdigit((*tokens)[0]) )</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                        <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token &amp;&amp; j&lt;3; token = token-&gt;next, j++ )</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                            rgba[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    else</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                        ;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.transparency&quot;</span> ) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    rgba[3] = tokens-&gt;next-&gt;real();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.dot&quot;</span> || *tokens == <span class="stringliteral">&quot;.dotat&quot;</span> ) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token &amp;&amp; j&lt;3; token = token-&gt;next, j++ )</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                        loc[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    comp = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    comp-&gt;<a class="code" href="class_bcomponent.html#a0568c7c1f95ec366947dc0f088cb5f0f">radius</a>(1);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.sphere&quot;</span> ) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token &amp;&amp; j&lt;3; token = token-&gt;next, j++ )</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                        loc[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                    comp = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    <span class="keywordflow">if</span> ( token ) comp-&gt;<a class="code" href="class_bcomponent.html#a0568c7c1f95ec366947dc0f088cb5f0f">radius</a>(token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>());</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.m&quot;</span> || *tokens == <span class="stringliteral">&quot;.move&quot;</span> ) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token &amp;&amp; j&lt;3; token = token-&gt;next, j++ )</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                        loc[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    comp = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.mr&quot;</span> || *tokens == <span class="stringliteral">&quot;.moverel&quot;</span> ) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                    <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token &amp;&amp; j&lt;3; token = token-&gt;next, j++ )</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                        vec[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    loc += vec;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                    comp = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.d&quot;</span> || *tokens == <span class="stringliteral">&quot;.draw&quot;</span> ) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                    <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token &amp;&amp; j&lt;3; token = token-&gt;next, j++ )</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                        loc[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    comp = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    <span class="keywordflow">if</span> ( comp &amp;&amp; comp2 ) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                        link = <a class="code" href="rwmodel_8h.html#afe6df6a836d297d3ffce4b764f2f2602">link_add</a>(&amp;link, comp, comp2, 0, 1);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                        <span class="keywordflow">if</span> ( !mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a> ) mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a> = link;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                        link-&gt;<a class="code" href="class_blink.html#a326b6f63d4a692b9cab57c368ef0b617">color</a>(rgba);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.dr&quot;</span> || *tokens == <span class="stringliteral">&quot;.drawrel&quot;</span> ) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token &amp;&amp; j&lt;3; token = token-&gt;next, j++ )</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        vec[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    loc += vec;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    comp = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    <span class="keywordflow">if</span> ( comp &amp;&amp; comp2 ) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        link = <a class="code" href="rwmodel_8h.html#afe6df6a836d297d3ffce4b764f2f2602">link_add</a>(&amp;link, comp, comp2, 0, 1);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        <span class="keywordflow">if</span> ( !mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a> ) mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a> = link;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                        link-&gt;<a class="code" href="class_blink.html#a326b6f63d4a692b9cab57c368ef0b617">color</a>(rgba);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.v&quot;</span> || *tokens == <span class="stringliteral">&quot;.vector&quot;</span> || *tokens == <span class="stringliteral">&quot;.cylinder&quot;</span> ) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token &amp;&amp; j&lt;3; token = token-&gt;next, j++ )</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                        loc[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    comp = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    <span class="keywordflow">for</span> ( j=0; token &amp;&amp; j&lt;3; token = token-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>, j++ )</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                        loc[j] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                    comp1 = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    comp1-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    <span class="keywordflow">if</span> ( comp &amp;&amp; comp1 ) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                        link = <a class="code" href="rwmodel_8h.html#afe6df6a836d297d3ffce4b764f2f2602">link_add</a>(&amp;link, comp, comp1, 0, 1);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                        <span class="keywordflow">if</span> ( !mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a> ) mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a> = link;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                        link-&gt;<a class="code" href="class_blink.html#a326b6f63d4a692b9cab57c368ef0b617">color</a>(rgba);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                        <span class="keywordflow">if</span> ( token ) link-&gt;<a class="code" href="class_blink.html#af92b47af10f7a8de91fbbad558d7dc5b">radius</a>(token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>());</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                        <span class="keywordflow">if</span> ( link-&gt;<a class="code" href="class_blink.html#af92b47af10f7a8de91fbbad558d7dc5b">radius</a>() &lt; 0.001 ) link-&gt;<a class="code" href="class_blink.html#af92b47af10f7a8de91fbbad558d7dc5b">radius</a>(1);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( *tokens == <span class="stringliteral">&quot;.polygon&quot;</span> ) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                    comp1 = NULL;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    <span class="keywordflow">for</span> ( j=0, token = tokens-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a>; token; token = token-&gt;<a class="code" href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">next</a> ) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        loc[j++] = token-&gt;<a class="code" href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">real</a>();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                        <span class="keywordflow">if</span> ( j &gt; 2 ) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                            j = 0;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                            comp = <a class="code" href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a>(loc, &amp;mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>, nc);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                            comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>(rgba);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                            <span class="keywordflow">if</span> ( comp &amp;&amp; comp1 ) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                link = <a class="code" href="rwmodel_8h.html#afe6df6a836d297d3ffce4b764f2f2602">link_add</a>(&amp;link, comp, comp1, 0, 1);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                <span class="keywordflow">if</span> ( !mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a> ) mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a> = link;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                link-&gt;<a class="code" href="class_blink.html#a326b6f63d4a692b9cab57c368ef0b617">color</a>(rgba);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                            }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                            comp1 = comp;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> &amp; <a class="code" href="utilities_8h.html#a65f0019f3f7f7b04cd45d68f60afe385">VERB_DEBUG</a> )</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    cout &lt;&lt; endl;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            comp2 = comp;   <span class="comment">// Previous component</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        fmod.close();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">  190</a></span>&#160;<span class="keywordtype">void</span>        <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(ofstream&amp; fbld, <a class="code" href="class_r_g_b.html">RGB&lt;float&gt;</a> rgb)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.color &quot;</span> &lt;&lt; rgb[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; rgb[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; rgb[2] &lt;&lt; endl;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#ac8f4598d89cff68f9123de0f9a03a647">  195</a></span>&#160;<span class="keywordtype">void</span>        <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(ofstream&amp; fbld, <a class="code" href="class_r_g_b_a.html">RGBA&lt;float&gt;</a> rgba)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.color &quot;</span> &lt;&lt; rgba[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; rgba[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; rgba[2] &lt;&lt; endl;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#a935335a6a7028b07f7c6367d40d30268">  200</a></span>&#160;<span class="keywordtype">void</span>        <a class="code" href="rwmodel__bild_8cpp.html#a935335a6a7028b07f7c6367d40d30268">bild_sphere</a>(ofstream&amp; fbld, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> loc, <span class="keywordtype">double</span> radius)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.sphere &quot;</span> &lt;&lt; loc[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; loc[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; loc[2] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; radius &lt;&lt; endl;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#add824c3e86aef28373d379afae4c8ece">  205</a></span>&#160;<span class="keywordtype">void</span>        <a class="code" href="rwmodel__bild_8cpp.html#add824c3e86aef28373d379afae4c8ece">bild_cylinder</a>(ofstream&amp; fbld, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> start, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> end, <span class="keywordtype">double</span> radius)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.cylinder &quot;</span> &lt;&lt; start[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; start[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; start[2]</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; end[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; end[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; end[2]</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; radius &lt;&lt; endl;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#af1ee3ccc41014a49f7f6961f6dcdba0e">  212</a></span>&#160;<span class="keywordtype">void</span>        <a class="code" href="rwmodel__bild_8cpp.html#af1ee3ccc41014a49f7f6961f6dcdba0e">bild_polygon_start</a>(ofstream&amp; fbld, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> vertex)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.polygon &quot;</span> &lt;&lt; vertex[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex[2];</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#a655aeba2ef77a2eb1b0f84f982fc280c">  216</a></span>&#160;<span class="keywordtype">void</span>        <a class="code" href="rwmodel__bild_8cpp.html#a655aeba2ef77a2eb1b0f84f982fc280c">bild_polygon_add</a>(ofstream&amp; fbld, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> vertex)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex[2];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#a1f77585fa443a8492d5273060cdb0a51">  220</a></span>&#160;<span class="keywordtype">void</span>        <a class="code" href="rwmodel__bild_8cpp.html#a1f77585fa443a8492d5273060cdb0a51">bild_polygon_end</a>(ofstream&amp; fbld, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> vertex)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; vertex[2] &lt;&lt; endl;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="rwmodel__bild_8cpp.html#aaa25e0d3aefc1f684751c7ee914c7231">  225</a></span>&#160;<span class="keywordtype">void</span>        <a class="code" href="rwmodel__bild_8cpp.html#aaa25e0d3aefc1f684751c7ee914c7231">bild_arrow</a>(ofstream&amp; fbld, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> start, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> end, <span class="keywordtype">double</span> cylrad, <span class="keywordtype">double</span> conerad, <span class="keywordtype">double</span> rho)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.arrow &quot;</span> &lt;&lt; start[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; start[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; start[2]</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; end[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; end[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; end[2]</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; cylrad &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; conerad &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; rho &lt;&lt; endl;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="rwmodel__bild_8h.html#aee5f32ef4b7ede2128e09c96be9aed97">  238</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="rwmodel__bild_8cpp.html#aee5f32ef4b7ede2128e09c96be9aed97">write_model_bild</a>(<a class="code" href="class_bstring.html">Bstring</a>&amp; filename, <a class="code" href="class_bmodel.html">Bmodel</a>* <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">int</span>             n;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="class_bmodel.html">Bmodel</a>*         mp = NULL;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp = NULL;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="class_blink.html">Blink</a>*          link = NULL;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="class_bstring.html">Bstring</a>         onename;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    ofstream        fmod;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">for</span> ( n=1, mp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>; mp; mp = mp-&gt;<a class="code" href="class_bmodel.html#afb3774e27b7dca74e29c9335d1ee8f60">next</a>, n++ ) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#afb3774e27b7dca74e29c9335d1ee8f60">next</a> )</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            onename = filename.<a class="code" href="class_bstring.html#af043d337bacf8beb3fd3b571172efeba">pre_rev</a>(<span class="charliteral">&#39;.&#39;</span>) + <a class="code" href="class_bstring.html">Bstring</a>(n, <span class="stringliteral">&quot;_%04d.&quot;</span>) + filename.<a class="code" href="class_bstring.html#a86f622055c232b8c5f84aadac914d031">post_rev</a>(<span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            onename = filename;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        fmod.open(onename.<a class="code" href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">c_str</a>());</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> ( mp-&gt;<a class="code" href="class_bmodel.html#ac46df65365b2b4d8ec0a6e1fb4106af6">comment</a>().length() ) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">//          Bstring*    sa = mp-&gt;comment().split(&quot;\n&quot;);</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">//          for ( Bstring* s = sa; s; s = s-&gt;next )</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">//              if ( s-&gt;length() ) fmod &lt;&lt; &quot;.comment &quot; &lt;&lt; *s &lt;&lt; endl;</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            vector&lt;string&gt;  sa = <a class="code" href="string__util_8h.html#a21228818f6b97bdd706d7980b74a2966">split</a>(mp-&gt;<a class="code" href="class_bmodel.html#ac46df65365b2b4d8ec0a6e1fb4106af6">comment</a>(), <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordflow">for</span> ( <span class="keyword">auto</span> s: sa )</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordflow">if</span> ( s.size() ) fmod &lt;&lt; <span class="stringliteral">&quot;.comment &quot;</span> &lt;&lt; s &lt;&lt; endl;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">for</span> ( comp = mp-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a> ) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(fmod, comp-&gt;<a class="code" href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">color</a>());</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#a935335a6a7028b07f7c6367d40d30268">bild_sphere</a>(fmod, comp-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>(), comp-&gt;<a class="code" href="class_bcomponent.html#a0568c7c1f95ec366947dc0f088cb5f0f">radius</a>());</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">for</span> ( link = mp-&gt;<a class="code" href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">link</a>; link; link = link-&gt;<a class="code" href="class_blink.html#a56e6daac64c1b4074a21f0500f2854d6">next</a> ) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(fmod, link-&gt;<a class="code" href="class_blink.html#a326b6f63d4a692b9cab57c368ef0b617">color</a>());</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#add824c3e86aef28373d379afae4c8ece">bild_cylinder</a>(fmod, link-&gt;<a class="code" href="class_blink.html#a9051d9b1e3467ac64b32087eedacd1b1">comp</a>[0]-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>(), link-&gt;<a class="code" href="class_blink.html#a9051d9b1e3467ac64b32087eedacd1b1">comp</a>[1]-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>(), link-&gt;<a class="code" href="class_blink.html#af92b47af10f7a8de91fbbad558d7dc5b">radius</a>());</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        fmod.close();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> n;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="rwmodel__bild_8h.html#ae6bab230a8bd45a44739abefc70e9ef3">  287</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="rwmodel__bild_8cpp.html#ae6bab230a8bd45a44739abefc70e9ef3">model_to_bild_orientations</a>(<a class="code" href="class_bstring.html">Bstring</a>&amp; filename, <a class="code" href="class_bmodel.html">Bmodel</a>* <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>, <span class="keywordtype">int</span> vec_type, <span class="keywordtype">int</span> color_type)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordtype">int</span>             n, selmax;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordtype">double</span>          vlen, vrad, dmin(1e10), dmax(-1e10), fommin(1e10), fommax(-1e10);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="class_r_g_b.html">RGB&lt;float&gt;</a>      rgb(1,1,1);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> vv, av, v1, v2, v3;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="class_matrix3.html">Matrix3</a>         mat;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">for</span> ( n=selmax=0, comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a>, n++ ) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span> ( dmin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>() ) dmin = comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">if</span> ( dmax &lt; comp-&gt;density() ) dmax = comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> ( fommin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>()) fommin = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">if</span> ( fommax &lt; comp-&gt;<a class="code" href="mg__processing_8h.html#a9b8250bcd3dbae566bd5ef8a6089b1cfa065fec74420cd18346040e497d71993b">FOM</a>()) fommax = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">if</span> ( selmax &lt; comp-&gt;select()) selmax = comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> ) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Generating a bild views file:   &quot;</span> &lt;&lt; filename &lt;&lt; endl;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    ofstream        fbld(filename.<a class="code" href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">c_str</a>());</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> ( fbld.fail() ) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;Error: Unable to open &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; for writing&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.color white&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">for</span> ( comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a> ) <span class="keywordflow">if</span> ( comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>()) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        vlen = comp-&gt;<a class="code" href="class_bcomponent.html#a0568c7c1f95ec366947dc0f088cb5f0f">radius</a>()*2;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        vrad = comp-&gt;<a class="code" href="class_bcomponent.html#a0568c7c1f95ec366947dc0f088cb5f0f">radius</a>()/5;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">switch</span> ( vec_type ) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="keywordflow">case</span> 1: vv = comp-&gt;<a class="code" href="class_bcomponent.html#aacdc3db3b8ef1aff289ccf96e189fb4e">view</a>().vector3(); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">case</span> 2: vv = comp-&gt;<a class="code" href="class_bcomponent.html#a07c86e0621c82a137062dceabb2e8538">force</a>(); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">case</span> 3: vv = comp-&gt;<a class="code" href="class_bcomponent.html#aefbd5cc2a91b0a39c4c9d14ed9fe9eb5">velocity</a>(); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        vv *= vlen;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">if</span> ( vec_type &lt; 2 ) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            av = <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a>(1,0,0);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            mat = comp-&gt;<a class="code" href="class_bcomponent.html#aacdc3db3b8ef1aff289ccf96e189fb4e">view</a>().matrix();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">//          mat = mat.transpose();</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            av = mat * av;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            av *= 3*vrad;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        v1 = comp-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>()+ vv;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        v2 = comp-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>()+ vv*0.75;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        v3 = v2 + av;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">switch</span> ( color_type ) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>(), 0, selmax);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>(), dmin, dmax);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>(), fommin, fommax);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(fbld, rgb);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#a935335a6a7028b07f7c6367d40d30268">bild_sphere</a>(fbld, comp-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>(), comp-&gt;<a class="code" href="class_bcomponent.html#a0568c7c1f95ec366947dc0f088cb5f0f">radius</a>());</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#aaa25e0d3aefc1f684751c7ee914c7231">bild_arrow</a>(fbld, comp-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>(), v1, vrad, vrad, 0.75);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> ( vec_type &lt; 2 ) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#af1ee3ccc41014a49f7f6961f6dcdba0e">bild_polygon_start</a>(fbld, v1);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#a655aeba2ef77a2eb1b0f84f982fc280c">bild_polygon_add</a>(fbld, v2);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#a1f77585fa443a8492d5273060cdb0a51">bild_polygon_end</a>(fbld, v3);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        fbld &lt;&lt; endl;       </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    fbld.close();</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="rwmodel__bild_8h.html#abdb2fe00ab1a841720f4eb92aee04ff2">  374</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="rwmodel__bild_8cpp.html#abdb2fe00ab1a841720f4eb92aee04ff2">model_to_bild_view_sphere</a>(<a class="code" href="class_bstring.html">Bstring</a>&amp; filename, <a class="code" href="class_bmodel.html">Bmodel</a>* <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>, <span class="keywordtype">int</span> color_type)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">int</span>             n, selmax;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordtype">double</span>          vrad(<a class="code" href="utilities_8h.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a>/360), dmin(1e10), dmax(-1e10), fommin(1e10), fommax(-1e10), fomrange(1);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="class_r_g_b.html">RGB&lt;float&gt;</a>      rgb(1,1,1);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a> vv, av, v1, v2, v3;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="class_matrix3.html">Matrix3</a>         mat;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">for</span> ( n=selmax=0, comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a>, n++ ) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">if</span> ( dmin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>() ) dmin = comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">if</span> ( dmax &lt; comp-&gt;density() ) dmax = comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> ( fommin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>()) fommin = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> ( fommax &lt; comp-&gt;<a class="code" href="mg__processing_8h.html#a9b8250bcd3dbae566bd5ef8a6089b1cfa065fec74420cd18346040e497d71993b">FOM</a>()) fommax = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> ( selmax &lt; comp-&gt;select()) selmax = comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    fomrange = 5*(fommax - fommin);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> ) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Generating a bild views file:   &quot;</span> &lt;&lt; filename &lt;&lt; endl;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    ofstream        fbld(filename.<a class="code" href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">c_str</a>());</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> ( fbld.fail() ) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;Error: Unable to open &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; for writing&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.color white&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.transparency 0.5&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="rwmodel__bild_8cpp.html#a935335a6a7028b07f7c6367d40d30268">bild_sphere</a>(fbld, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a>(0,0,0), 1);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.transparency 0.0&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">for</span> ( comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a> ) <span class="keywordflow">if</span> ( comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>()) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        vv = comp-&gt;<a class="code" href="class_bcomponent.html#aacdc3db3b8ef1aff289ccf96e189fb4e">view</a>().vector3();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        av = <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a>(1,0,0);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        mat = comp-&gt;<a class="code" href="class_bcomponent.html#aacdc3db3b8ef1aff289ccf96e189fb4e">view</a>().matrix();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">//      mat = mat.transpose();</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        av = mat * av;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        av *= 3*vrad;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> ( fomrange &gt; 0 ) v1 = vv*(1 + vrad + (comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>()- fommin)/fomrange);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">else</span> v1 = vv*(1 + 10*vrad);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        v2 = vv*1.15;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        v3 = v2 + av;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">switch</span> ( color_type ) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>(), 0, selmax);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>(), dmin, dmax);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>(), fommin, fommax);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(fbld, rgb);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">//      bild_arrow(fbld, vv, v1, vrad, vrad, 0.75);</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#add824c3e86aef28373d379afae4c8ece">bild_cylinder</a>(fbld, vv, v1, vrad);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">//      bild_polygon_start(fbld, v1);</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">//      bild_polygon_add(fbld, v2);</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">//      bild_polygon_end(fbld, v3);</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        fbld &lt;&lt; endl;       </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    fbld.close();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="rwmodel__bild_8h.html#a177ac8e7facf754b5e03e3547c2f749c">  457</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="rwmodel__bild_8cpp.html#a177ac8e7facf754b5e03e3547c2f749c">model_to_bild_force_vectors</a>(<a class="code" href="class_bstring.html">Bstring</a>&amp; filename, <a class="code" href="class_bmodel.html">Bmodel</a>* <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>, <span class="keywordtype">int</span> color_type)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordtype">int</span>             n, selmax;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordtype">double</span>          vrad(<a class="code" href="utilities_8h.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a>/360), dmin(1e10), dmax(-1e10);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordtype">double</span>          f, forcemax(0), fommin(1e10), fommax(-1e10), scale(1);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="class_r_g_b.html">RGB&lt;float&gt;</a>      rgb(1,1,1);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="class_vector3.html">Vector3&lt;float&gt;</a>  fv, v0;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">for</span> ( n=selmax=0, comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a>, n++ ) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">if</span> ( dmin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>() ) dmin = comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>();</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">if</span> ( dmax &lt; comp-&gt;density() ) dmax = comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        f = comp-&gt;<a class="code" href="class_bcomponent.html#a07c86e0621c82a137062dceabb2e8538">force</a>().length();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> ( forcemax &lt; f ) forcemax = f;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> ( fommin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>()) fommin = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span> ( fommax &lt; comp-&gt;<a class="code" href="mg__processing_8h.html#a9b8250bcd3dbae566bd5ef8a6089b1cfa065fec74420cd18346040e497d71993b">FOM</a>()) fommax = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> ( selmax &lt; comp-&gt;select()) selmax = comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    scale = 1/forcemax;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    vrad = scale/360;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">//  fomrange = 5*(fommax - fommin);</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> ) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Generating a bild force vector file:   &quot;</span> &lt;&lt; filename &lt;&lt; endl;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    ofstream        fbld(filename.<a class="code" href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">c_str</a>());</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> ( fbld.fail() ) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;Error: Unable to open &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; for writing&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.color white&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.transparency 0.5&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="rwmodel__bild_8cpp.html#a935335a6a7028b07f7c6367d40d30268">bild_sphere</a>(fbld, <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a>(0,0,0), 1);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.transparency 0.0&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">for</span> ( comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a> ) <span class="keywordflow">if</span> ( comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>()) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        fv = v0 = comp-&gt;<a class="code" href="class_bcomponent.html#a07c86e0621c82a137062dceabb2e8538">force</a>();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        fv *= scale;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        v0.<a class="code" href="class_vector3.html#aba4bd5a032489bb77d4a629573b5c018">normalize</a>();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        fv += v0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">switch</span> ( color_type ) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>(), 0, selmax);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>(), dmin, dmax);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>(), fommin, fommax);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(fbld, rgb);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#add824c3e86aef28373d379afae4c8ece">bild_cylinder</a>(fbld, v0, fv, vrad);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    fbld.close();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="rwmodel__bild_8h.html#af6738624ffd062eb05a425684928a8d1">  535</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="rwmodel__bild_8cpp.html#af6738624ffd062eb05a425684928a8d1">model_to_bild_view_polygons</a>(<a class="code" href="class_bstring.html">Bstring</a>&amp; filename, <a class="code" href="class_bmodel.html">Bmodel</a>* <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>, <span class="keywordtype">int</span> order, <span class="keywordtype">int</span> color_type)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">int</span>                 i, n, selmax;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordtype">double</span>              dmin(1e10), dmax(-1e10), fommin(1e10), fommax(-1e10);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="class_r_g_b.html">RGB&lt;float&gt;</a>          rgb(1,1,1);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a>     av;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="class_matrix3.html">Matrix3</a>             mat;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*         comp;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordtype">double</span>              a(<a class="code" href="utilities_8h.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a>*1.0L/order);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a>*    p = <span class="keyword">new</span> <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a>[order];</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">for</span> ( i=0; i&lt;order; i++ )</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        p[i] = <a class="code" href="class_vector3.html">Vector3&lt;double&gt;</a>(cos(i*a), sin(i*a), 0);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">for</span> ( n=selmax=0, comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a>, n++ ) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">if</span> ( dmin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>() ) dmin = comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>();</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> ( dmax &lt; comp-&gt;density() ) dmax = comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">if</span> ( fommin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>()) fommin = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="keywordflow">if</span> ( fommax &lt; comp-&gt;<a class="code" href="mg__processing_8h.html#a9b8250bcd3dbae566bd5ef8a6089b1cfa065fec74420cd18346040e497d71993b">FOM</a>()) fommax = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span> ( selmax &lt; comp-&gt;select()) selmax = comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> ) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Generating a bild view polygons file:   &quot;</span> &lt;&lt; filename &lt;&lt; endl;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    ofstream        fbld(filename.<a class="code" href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">c_str</a>());</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> ( fbld.fail() ) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;Error: Unable to open &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; for writing&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.color white&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">for</span> ( comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a> ) <span class="keywordflow">if</span> ( comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>()) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">switch</span> ( color_type ) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">select</a>(), 0, selmax);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">density</a>(), dmin, dmax);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>(), fommin, fommax);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(fbld, rgb);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        mat = comp-&gt;<a class="code" href="class_bcomponent.html#aacdc3db3b8ef1aff289ccf96e189fb4e">view</a>().matrix();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">for</span> ( i=0; i&lt;order; i++ ) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            av = comp-&gt;<a class="code" href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">location</a>()+ mat * p[i] * comp-&gt;<a class="code" href="class_bcomponent.html#a0568c7c1f95ec366947dc0f088cb5f0f">radius</a>();</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">if</span> ( i == 0 ) <a class="code" href="rwmodel__bild_8cpp.html#af1ee3ccc41014a49f7f6961f6dcdba0e">bild_polygon_start</a>(fbld, av);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( i &lt; order - 1 ) <a class="code" href="rwmodel__bild_8cpp.html#a655aeba2ef77a2eb1b0f84f982fc280c">bild_polygon_add</a>(fbld, av);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordflow">else</span> <a class="code" href="rwmodel__bild_8cpp.html#a1f77585fa443a8492d5273060cdb0a51">bild_polygon_end</a>(fbld, av);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    fbld.close();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keyword">delete</span>[] p;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno"><a class="line" href="rwmodel__bild_8h.html#a35269022e5a7c8023d82b72a632f39c5">  614</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="rwmodel__bild_8cpp.html#a35269022e5a7c8023d82b72a632f39c5">model_to_bild_polygons</a>(<a class="code" href="class_bstring.html">Bstring</a>&amp; filename, <a class="code" href="class_bmodel.html">Bmodel</a>* <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>, <span class="keywordtype">int</span> color_type)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;{</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#af04fbb1a1f485c59342dc29c512140b5">poly</a> ) <a class="code" href="model__poly_8h.html#a69630144dc2a1a5c121d2ce88195a4de">model_poly_generate</a>(<a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordtype">int</span>             i, n, npoly;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordtype">double</span>          fom, fommin(1e10), fommax(-1e10);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="class_r_g_b.html">RGB&lt;float&gt;</a>      rgb(1,1,1);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="class_bpolygon.html">Bpolygon</a>*       poly;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">for</span> ( comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a> ) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">if</span> ( fommin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>()) fommin = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">if</span> ( fommax &lt; comp-&gt;<a class="code" href="mg__processing_8h.html#a9b8250bcd3dbae566bd5ef8a6089b1cfa065fec74420cd18346040e497d71993b">FOM</a>()) fommax = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">for</span> ( npoly=0, poly = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#af04fbb1a1f485c59342dc29c512140b5">poly</a>; poly; poly = poly-&gt;<a class="code" href="class_bpolygon.html#a42ec7e2c82c6e67962f3671f7069e3a7">next</a> ) npoly++;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> ) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Generating a bild polygon file: &quot;</span> &lt;&lt; filename &lt;&lt; endl;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">switch</span> ( color_type ) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordflow">case</span> 1: cout &lt;&lt; <span class="stringliteral">&quot;Color spectrum range:           0 - &quot;</span> &lt;&lt; npoly &lt;&lt; endl; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">case</span> 2: cout &lt;&lt; <span class="stringliteral">&quot;FOM range:                      &quot;</span> &lt;&lt; fommin &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt; fommax &lt;&lt; endl; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="keywordflow">default</span>: cout &lt;&lt; <span class="stringliteral">&quot;Homogeneous color&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    ofstream        fbld(filename.<a class="code" href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">c_str</a>());</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> ( fbld.fail() ) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;Error: Unable to open &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; for writing&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.color white&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">for</span> ( n=0, poly = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#af04fbb1a1f485c59342dc29c512140b5">poly</a>; poly; poly = poly-&gt;<a class="code" href="class_bpolygon.html#a42ec7e2c82c6e67962f3671f7069e3a7">next</a>, n++ ) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">for</span> ( i=0, fom=0; i&lt;poly-&gt;<a class="code" href="class_bpolygon.html#a06750b0d57d72d5a509959b958623ecd">comp</a>.size() &amp;&amp; poly-&gt;<a class="code" href="class_bpolygon.html#a06750b0d57d72d5a509959b958623ecd">comp</a>[i]; i++ ) fom += poly-&gt;<a class="code" href="class_bpolygon.html#a06750b0d57d72d5a509959b958623ecd">comp</a>[i]-&gt;FOM();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keywordflow">if</span> ( i ) fom /= i;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">switch</span> ( color_type ) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(n, 0, npoly);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(fom, fommin, fommax);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(fbld, rgb);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        fbld &lt;&lt; <span class="stringliteral">&quot;.polygon&quot;</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">for</span> ( i=0; i&lt;poly-&gt;<a class="code" href="class_bpolygon.html#a06750b0d57d72d5a509959b958623ecd">comp</a>.size() &amp;&amp; poly-&gt;<a class="code" href="class_bpolygon.html#a06750b0d57d72d5a509959b958623ecd">comp</a>[i]; i++ )</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#a655aeba2ef77a2eb1b0f84f982fc280c">bild_polygon_add</a>(fbld, poly-&gt;<a class="code" href="class_bpolygon.html#a06750b0d57d72d5a509959b958623ecd">comp</a>[i]-&gt;location());</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    fbld.close();</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="rwmodel__bild_8h.html#a0b6c27c31979b64a961b23a34b31789f">  684</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="rwmodel__bild_8cpp.html#a0b6c27c31979b64a961b23a34b31789f">model_to_bild_neighbor_planes</a>(<a class="code" href="class_bstring.html">Bstring</a>&amp; filename, <a class="code" href="class_bmodel.html">Bmodel</a>* <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>, <span class="keywordtype">int</span> color_type)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;{</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <a class="code" href="model__neighbors_8h.html#abae973a7a0182c5f36da932d21141c5c">model_set_neighbors</a>(<a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>, 8, 50);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordtype">int</span>             i, n, ncomp;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordtype">double</span>          fom, fommin(1e10), fommax(-1e10);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="class_r_g_b.html">RGB&lt;float&gt;</a>      rgb;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="class_bcomponent.html">Bcomponent</a>*     comp;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">for</span> ( ncomp=0, comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a>, ncomp++ ) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">if</span> ( fommin &gt; comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>()) fommin = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">if</span> ( fommax &lt; comp-&gt;<a class="code" href="mg__processing_8h.html#a9b8250bcd3dbae566bd5ef8a6089b1cfa065fec74420cd18346040e497d71993b">FOM</a>()) fommax = comp-&gt;<a class="code" href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">FOM</a>();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> ) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Generating a bild neighbor plane file: &quot;</span> &lt;&lt; filename &lt;&lt; endl;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">switch</span> ( color_type ) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keywordflow">case</span> 1: cout &lt;&lt; <span class="stringliteral">&quot;Color spectrum range:           0 - &quot;</span> &lt;&lt; ncomp &lt;&lt; endl; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="keywordflow">case</span> 2: cout &lt;&lt; <span class="stringliteral">&quot;FOM range:                      &quot;</span> &lt;&lt; fommin &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt; fommax &lt;&lt; endl; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="keywordflow">default</span>: cout &lt;&lt; <span class="stringliteral">&quot;Homogeneous color&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    ofstream        fbld(filename.<a class="code" href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">c_str</a>());</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span> ( fbld.fail() ) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        cerr &lt;&lt; <span class="stringliteral">&quot;Error: Unable to open &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; for writing&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    fbld &lt;&lt; <span class="stringliteral">&quot;.color white&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">for</span> ( n=0, comp = <a class="code" href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a>-&gt;<a class="code" href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">comp</a>; comp; comp = comp-&gt;<a class="code" href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">next</a>, n++ ) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">for</span> ( i=0, fom=0; i&lt;comp-&gt;<a class="code" href="class_bcomponent.html#ab726ee3d5e93e479ef94fd2831c14527">neighbor</a>.size() &amp;&amp; comp-&gt;<a class="code" href="class_bcomponent.html#ab726ee3d5e93e479ef94fd2831c14527">neighbor</a>[i]; i++ )</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            fom += comp-&gt;<a class="code" href="class_bcomponent.html#ab726ee3d5e93e479ef94fd2831c14527">neighbor</a>[i]-&gt;FOM();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">if</span> ( i ) fom /= i;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">switch</span> ( color_type ) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(n, 0, ncomp);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                rgb.<a class="code" href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">spectrum</a>(fom, fommin, fommax);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <a class="code" href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a>(fbld, rgb);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        fbld &lt;&lt; <span class="stringliteral">&quot;.polygon&quot;</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">for</span> ( i=0; i&lt;comp-&gt;<a class="code" href="class_bcomponent.html#ab726ee3d5e93e479ef94fd2831c14527">neighbor</a>.size() &amp;&amp; comp-&gt;<a class="code" href="class_bcomponent.html#ab726ee3d5e93e479ef94fd2831c14527">neighbor</a>[i]; i++ )</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <a class="code" href="rwmodel__bild_8cpp.html#a655aeba2ef77a2eb1b0f84f982fc280c">bild_polygon_add</a>(fbld, comp-&gt;<a class="code" href="class_bcomponent.html#ab726ee3d5e93e479ef94fd2831c14527">neighbor</a>[i]-&gt;location());</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    fbld &lt;&lt; endl;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    fbld.close();</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;}</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">BILD format</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">BILD is a simple text format that describes lines, polygons, and geometric primitives such as spheres, boxes, cylinders, and cones with commands (see example.bild and XYZ-axes.bild). Character strings can also be included. The commands are used to generate a VRML model in Chimera. The objects can be specified in absolute coordinates and/or transformed and scaled coordinates. See also: shape, define, geometric objects</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">This file type is indicated by the filename suffix .bild or .bld, or by using bild:filename in the command line.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">Curved objects (spheres, cones, and cylinders) read from BILD format are described as perfectly smooth in exported files, but display within Chimera uses planar facets. The number of facets and the apparent smoothness can be increased by raising the subdivision level with the Effects tool or the set command.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">BILD Commands</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">Square brackets denote optional parameters.</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">.arrow x1 y1 z1 x2 y2 z2 [r1 [r2 [rho]]] </span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">Draw an arrow from (x1, y1, z1) to (x2, y2, z2). An arrow consists of a cylinder stretching from the initial point to an intermediary junction, and a cone stretching from the junction to the final point. The radius of the cylinder is r1 (default 0.1), the radius of the base of the cone is r2 (default 4*r1), and the fraction of the total distance taken up by the cylinder is rho (default 0.75).</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">.box x1 y1 z1 x2 y2 z2 </span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">Draw a box with opposite corners at (x1, y1, z1) and (x2, y2, z2).</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">.color name </span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">.color r g b </span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">Set the color of subsequently defined items. The name can be a built-in name, a name defined previously with colordef, or an integer that refers to the old BILD color wheel (0-65, inclusive). Alternatively, a color can be described by its red (r), green (g), and blue (b) components, each in the range 0-1, inclusive. Any transparency in the color is ignored, but transparency can be set separately.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">.cmov x y z </span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">Define the starting location of the next character string. Lines in the BILD file that do not start with a period (.) are character strings to be displayed. See also .font.</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">.comment text </span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">User comment line (ignored during object creation).</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">.cone x1 y1 z1 x2 y2 z2 r [open] </span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">Draw a cone with a base of radius r centered at (x1, y1, z1) and a tip at (x2, y2, z2). If the keyword open is present, the base of the cone will be invisible.</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">.cylinder x1 y1 z1 x2 y2 z2 r [open] </span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">Draw a cylinder with radius r and bases centered at (x1, y1, z1) and (x2, y2, z2). If the keyword open is present, the bases of the cylinder will be invisible.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">.dotat x y z </span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">.dot x y z </span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">Draw a sphere of unit radius centered at (x, y, z). The sphere center is treated as a vertex if there is a subsequent .draw, .drawrel, or .moverel command.</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">.draw x y z </span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">.d x y z </span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">Add another vertex to the current set of line segments. A line will be drawn from the previous vertex to this vertex at (x, y, z). There should be a prior .move, .moverel, .dotat, or .marker command (these initiate sets of line segments).</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">.drawrel dx dy dz </span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">.dr dx dy dz </span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">Add another vertex to the current set of line segments. A line will be drawn from the previous vertex at (x, y, z) to this vertex at (x + dx, y + dy, z + dz).</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">.font fontname pointsize [fontstyle] </span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">Set the font, font size, and font style of subsequent character strings. Lines in the BILD file that do not start with a period (.) are character strings to be displayed. Options for fontname include: Times, Helvetica, Courier, SERIF, SANS, TYPEWRITER. Options for fontstyle: plain, bold, italic, bold italic. See also .cmov.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">.marker x y z </span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">Draw a box of unit cubic diagonal centered at (x, y, z), i.e., a box with opposite corners at (x – 0.5, y – 0.5, z – 0.5) and (x + 0.5, y + 0.5, z + 0.5). The box center is treated as a vertex if there is a subsequent .draw, .drawrel, or .moverel command.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">.move x y z </span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">.m x y z </span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">Start a new set of line segments whose first vertex is at (x, y, z).</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">.moverel dx dy dz </span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">.mr dx dy dz </span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">Start a new set of line segments whose first vertex is at (x + dz, y + dy, z + dz), where (x, y, z) is the coordinate of the last vertex defined.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">.polygon x1 y1 z1 x2 y2 z2 ... xN yN zN </span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">Draw a flat polygon with vertices at (x1, y1, z1), (x2, y2, z2), ..., (xN, yN, zN).</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">.pop </span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">Discard the most recent transformation (rotation, scaling, or translation) from the transformation stack.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">.rotate angle axis </span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">.rot angle axis </span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">Rotate all subsequent coordinates by angle degrees about the given axis. The axis can be given as a single letter (x, y, or z) or as three numbers defining an arbitrary vector: xa ya za. This transformation is added to the top of the transformation stack.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">.scale xscale [yscale [zscale]] </span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">Scale all subsequent coordinates by the given factor(s). The x coordinates will be scaled by xscale, y coordinates by yscale (equal to xscale by default), and z coordinates by zscale (equal to xscale by default). This transformation is added to the top of the transformation stack.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">.sphere x y z r </span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">Draw a sphere centered at (x, y, z) with radius r.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">.translate dx dy dz </span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">.tran dx dy dz </span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">Translate all subsequent coordinates by the specified amount. This transformation is added to the top of the transformation stack.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">.transparency value </span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">Set the transparency of subsequently defined items. The value can range from 0.0 (not transparent) to 1.0 (completely transparent).</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">.vector x1 y1 z1 x2 y2 z2 </span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">or</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">.v x1 y1 z1 x2 y2 z2 </span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">Draw a line segment from (x1, y1, z1) to (x2, y2, z2). This command is a shorthand for</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">.m x1 y1 z1 </span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">.d x2 y2 z2</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">UCSF Computer Graphics Laboratory / October 2013</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">*/</span></div>
<div class="ttc" id="a_color_8h_html"><div class="ttname"><a href="_color_8h.html">Color.h</a></div><div class="ttdoc">Classes for color objects.</div></div>
<div class="ttc" id="abshow_8cpp_html_a828359eaa8de833b547ac96934f43841"><div class="ttname"><a href="bshow_8cpp.html#a828359eaa8de833b547ac96934f43841">model</a></div><div class="ttdeci">Bmodel * model</div><div class="ttdef"><b>Definition:</b> <a href="bshow_8cpp_source.html#l00034">bshow.cpp:34</a></div></div>
<div class="ttc" id="aclass_bcomponent_html"><div class="ttname"><a href="class_bcomponent.html">Bcomponent</a></div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00284">rwmodel.h:284</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_a0568c7c1f95ec366947dc0f088cb5f0f"><div class="ttname"><a href="class_bcomponent.html#a0568c7c1f95ec366947dc0f088cb5f0f">Bcomponent::radius</a></div><div class="ttdeci">void radius(double r)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00348">rwmodel.h:348</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_a07c86e0621c82a137062dceabb2e8538"><div class="ttname"><a href="class_bcomponent.html#a07c86e0621c82a137062dceabb2e8538">Bcomponent::force</a></div><div class="ttdeci">void force(Vector3&lt; double &gt; v)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00344">rwmodel.h:344</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_a0978c3108f981f7b22c0d6c62cf02bc0"><div class="ttname"><a href="class_bcomponent.html#a0978c3108f981f7b22c0d6c62cf02bc0">Bcomponent::FOM</a></div><div class="ttdeci">void FOM(double d)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00354">rwmodel.h:354</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_a1d005b81054dc10d00097ba6c5b5ddb8"><div class="ttname"><a href="class_bcomponent.html#a1d005b81054dc10d00097ba6c5b5ddb8">Bcomponent::add</a></div><div class="ttdeci">Bcomponent * add(string s)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00359">rwmodel.h:359</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_a5462aa65dbf80fe95ba4a4b992815012"><div class="ttname"><a href="class_bcomponent.html#a5462aa65dbf80fe95ba4a4b992815012">Bcomponent::density</a></div><div class="ttdeci">void density(double d)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00352">rwmodel.h:352</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_a5f39d695d60a17ab3a5a02fe8b090e4e"><div class="ttname"><a href="class_bcomponent.html#a5f39d695d60a17ab3a5a02fe8b090e4e">Bcomponent::location</a></div><div class="ttdeci">void location(Vector3&lt; double &gt; v)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00336">rwmodel.h:336</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_aacdc3db3b8ef1aff289ccf96e189fb4e"><div class="ttname"><a href="class_bcomponent.html#aacdc3db3b8ef1aff289ccf96e189fb4e">Bcomponent::view</a></div><div class="ttdeci">void view(View2&lt; float &gt; v)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00341">rwmodel.h:341</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_ab726ee3d5e93e479ef94fd2831c14527"><div class="ttname"><a href="class_bcomponent.html#ab726ee3d5e93e479ef94fd2831c14527">Bcomponent::neighbor</a></div><div class="ttdeci">vector&lt; Bcomponent * &gt; neighbor</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00312">rwmodel.h:312</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_abb61a534cb936a886572f37bad3dd788"><div class="ttname"><a href="class_bcomponent.html#abb61a534cb936a886572f37bad3dd788">Bcomponent::find_closest</a></div><div class="ttdeci">Bcomponent * find_closest(Vector3&lt; double &gt; coor)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00388">rwmodel.h:388</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_ad64404603e7278498495b7028cd2d1f6"><div class="ttname"><a href="class_bcomponent.html#ad64404603e7278498495b7028cd2d1f6">Bcomponent::select</a></div><div class="ttdeci">void select(long i)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00356">rwmodel.h:356</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_ae9a14b9b8e677bdce35e81cbf43be006"><div class="ttname"><a href="class_bcomponent.html#ae9a14b9b8e677bdce35e81cbf43be006">Bcomponent::next</a></div><div class="ttdeci">Bcomponent * next</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00297">rwmodel.h:297</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_aefbd5cc2a91b0a39c4c9d14ed9fe9eb5"><div class="ttname"><a href="class_bcomponent.html#aefbd5cc2a91b0a39c4c9d14ed9fe9eb5">Bcomponent::velocity</a></div><div class="ttdeci">void velocity(Vector3&lt; double &gt; v)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00346">rwmodel.h:346</a></div></div>
<div class="ttc" id="aclass_bcomponent_html_afd25447d03e7e9995d48876b7bc29cef"><div class="ttname"><a href="class_bcomponent.html#afd25447d03e7e9995d48876b7bc29cef">Bcomponent::color</a></div><div class="ttdeci">void color(RGBA&lt; float &gt; c)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00350">rwmodel.h:350</a></div></div>
<div class="ttc" id="aclass_blink_html"><div class="ttname"><a href="class_blink.html">Blink</a></div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00466">rwmodel.h:466</a></div></div>
<div class="ttc" id="aclass_blink_html_a326b6f63d4a692b9cab57c368ef0b617"><div class="ttname"><a href="class_blink.html#a326b6f63d4a692b9cab57c368ef0b617">Blink::color</a></div><div class="ttdeci">void color(RGBA&lt; float &gt; c)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00522">rwmodel.h:522</a></div></div>
<div class="ttc" id="aclass_blink_html_a56e6daac64c1b4074a21f0500f2854d6"><div class="ttname"><a href="class_blink.html#a56e6daac64c1b4074a21f0500f2854d6">Blink::next</a></div><div class="ttdeci">Blink * next</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00486">rwmodel.h:486</a></div></div>
<div class="ttc" id="aclass_blink_html_a9051d9b1e3467ac64b32087eedacd1b1"><div class="ttname"><a href="class_blink.html#a9051d9b1e3467ac64b32087eedacd1b1">Blink::comp</a></div><div class="ttdeci">Bcomponent * comp[2]</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00487">rwmodel.h:487</a></div></div>
<div class="ttc" id="aclass_blink_html_af92b47af10f7a8de91fbbad558d7dc5b"><div class="ttname"><a href="class_blink.html#af92b47af10f7a8de91fbbad558d7dc5b">Blink::radius</a></div><div class="ttdeci">void radius(double r)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00520">rwmodel.h:520</a></div></div>
<div class="ttc" id="aclass_bmodel_html"><div class="ttname"><a href="class_bmodel.html">Bmodel</a></div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00651">rwmodel.h:651</a></div></div>
<div class="ttc" id="aclass_bmodel_html_a00bb9a087d55a0c54f591ecee085baa4"><div class="ttname"><a href="class_bmodel.html#a00bb9a087d55a0c54f591ecee085baa4">Bmodel::add</a></div><div class="ttdeci">Bmodel * add(string s)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00714">rwmodel.h:714</a></div></div>
<div class="ttc" id="aclass_bmodel_html_a03d8627fdbad9d4817e3958b1da8f0fe"><div class="ttname"><a href="class_bmodel.html#a03d8627fdbad9d4817e3958b1da8f0fe">Bmodel::comp</a></div><div class="ttdeci">Bcomponent * comp</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00683">rwmodel.h:683</a></div></div>
<div class="ttc" id="aclass_bmodel_html_ab363cf7403d61e53ad304ab842328195"><div class="ttname"><a href="class_bmodel.html#ab363cf7403d61e53ad304ab842328195">Bmodel::link</a></div><div class="ttdeci">Blink * link</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00684">rwmodel.h:684</a></div></div>
<div class="ttc" id="aclass_bmodel_html_ac46df65365b2b4d8ec0a6e1fb4106af6"><div class="ttname"><a href="class_bmodel.html#ac46df65365b2b4d8ec0a6e1fb4106af6">Bmodel::comment</a></div><div class="ttdeci">void comment(string s)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00690">rwmodel.h:690</a></div></div>
<div class="ttc" id="aclass_bmodel_html_af04fbb1a1f485c59342dc29c512140b5"><div class="ttname"><a href="class_bmodel.html#af04fbb1a1f485c59342dc29c512140b5">Bmodel::poly</a></div><div class="ttdeci">Bpolygon * poly</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00685">rwmodel.h:685</a></div></div>
<div class="ttc" id="aclass_bmodel_html_afb3774e27b7dca74e29c9335d1ee8f60"><div class="ttname"><a href="class_bmodel.html#afb3774e27b7dca74e29c9335d1ee8f60">Bmodel::next</a></div><div class="ttdeci">Bmodel * next</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00667">rwmodel.h:667</a></div></div>
<div class="ttc" id="aclass_bpolygon_html"><div class="ttname"><a href="class_bpolygon.html">Bpolygon</a></div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00597">rwmodel.h:597</a></div></div>
<div class="ttc" id="aclass_bpolygon_html_a06750b0d57d72d5a509959b958623ecd"><div class="ttname"><a href="class_bpolygon.html#a06750b0d57d72d5a509959b958623ecd">Bpolygon::comp</a></div><div class="ttdeci">vector&lt; Bcomponent * &gt; comp</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00607">rwmodel.h:607</a></div></div>
<div class="ttc" id="aclass_bpolygon_html_a42ec7e2c82c6e67962f3671f7069e3a7"><div class="ttname"><a href="class_bpolygon.html#a42ec7e2c82c6e67962f3671f7069e3a7">Bpolygon::next</a></div><div class="ttdeci">Bpolygon * next</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8h_source.html#l00606">rwmodel.h:606</a></div></div>
<div class="ttc" id="aclass_bstring_html"><div class="ttname"><a href="class_bstring.html">Bstring</a></div><div class="ttdef"><b>Definition:</b> <a href="_bstring_8h_source.html#l00029">Bstring.h:29</a></div></div>
<div class="ttc" id="aclass_bstring_html_a06bd53725640b94250b6cf73e362cecb"><div class="ttname"><a href="class_bstring.html#a06bd53725640b94250b6cf73e362cecb">Bstring::c_str</a></div><div class="ttdeci">const char * c_str()</div><div class="ttdef"><b>Definition:</b> <a href="_bstring_8h_source.html#l00074">Bstring.h:74</a></div></div>
<div class="ttc" id="aclass_bstring_html_a2a3c4e2076185a79e07520b920763725"><div class="ttname"><a href="class_bstring.html#a2a3c4e2076185a79e07520b920763725">Bstring::real</a></div><div class="ttdeci">double real()</div><div class="ttdef"><b>Definition:</b> <a href="_bstring_8cpp_source.html#l00546">Bstring.cpp:546</a></div></div>
<div class="ttc" id="aclass_bstring_html_a45a1baecd5b35d440905a2c14eead185"><div class="ttname"><a href="class_bstring.html#a45a1baecd5b35d440905a2c14eead185">Bstring::next</a></div><div class="ttdeci">Bstring * next</div><div class="ttdef"><b>Definition:</b> <a href="_bstring_8h_source.html#l00031">Bstring.h:31</a></div></div>
<div class="ttc" id="aclass_bstring_html_a86f622055c232b8c5f84aadac914d031"><div class="ttname"><a href="class_bstring.html#a86f622055c232b8c5f84aadac914d031">Bstring::post_rev</a></div><div class="ttdeci">Bstring post_rev(char c)</div><div class="ttdef"><b>Definition:</b> <a href="_bstring_8cpp_source.html#l00429">Bstring.cpp:429</a></div></div>
<div class="ttc" id="aclass_bstring_html_aac78c0e3f4d58a618dc0a1224c49e81c"><div class="ttname"><a href="class_bstring.html#aac78c0e3f4d58a618dc0a1224c49e81c">Bstring::str</a></div><div class="ttdeci">string str()</div><div class="ttdef"><b>Definition:</b> <a href="_bstring_8h_source.html#l00042">Bstring.h:42</a></div></div>
<div class="ttc" id="aclass_bstring_html_ad1e8da6164aa13fc0dccb5af0e3f8c8f"><div class="ttname"><a href="class_bstring.html#ad1e8da6164aa13fc0dccb5af0e3f8c8f">Bstring::split</a></div><div class="ttdeci">Bstring * split()</div><div class="ttdef"><b>Definition:</b> <a href="_bstring_8cpp_source.html#l00598">Bstring.cpp:598</a></div></div>
<div class="ttc" id="aclass_bstring_html_af043d337bacf8beb3fd3b571172efeba"><div class="ttname"><a href="class_bstring.html#af043d337bacf8beb3fd3b571172efeba">Bstring::pre_rev</a></div><div class="ttdeci">Bstring pre_rev(char c)</div><div class="ttdef"><b>Definition:</b> <a href="_bstring_8cpp_source.html#l00414">Bstring.cpp:414</a></div></div>
<div class="ttc" id="aclass_matrix3_html"><div class="ttname"><a href="class_matrix3.html">Matrix3</a></div><div class="ttdef"><b>Definition:</b> <a href="_matrix3_8h_source.html#l00017">Matrix3.h:18</a></div></div>
<div class="ttc" id="aclass_r_g_b_a_html"><div class="ttname"><a href="class_r_g_b_a.html">RGBA&lt; float &gt;</a></div></div>
<div class="ttc" id="aclass_r_g_b_html"><div class="ttname"><a href="class_r_g_b.html">RGB</a></div><div class="ttdef"><b>Definition:</b> <a href="_color_8h_source.html#l00024">Color.h:24</a></div></div>
<div class="ttc" id="aclass_r_g_b_html_a646f779055b10fc5e4db98694f2e4eca"><div class="ttname"><a href="class_r_g_b.html#a646f779055b10fc5e4db98694f2e4eca">RGB::spectrum</a></div><div class="ttdeci">void spectrum(double value, double cmin, double cmax)</div><div class="ttdef"><b>Definition:</b> <a href="_color_8h_source.html#l00089">Color.h:89</a></div></div>
<div class="ttc" id="aclass_vector3_html"><div class="ttname"><a href="class_vector3.html">Vector3&lt; double &gt;</a></div></div>
<div class="ttc" id="aclass_vector3_html_aba4bd5a032489bb77d4a629573b5c018"><div class="ttname"><a href="class_vector3.html#aba4bd5a032489bb77d4a629573b5c018">Vector3::normalize</a></div><div class="ttdeci">double normalize()</div><div class="ttdef"><b>Definition:</b> <a href="_vector3_8h_source.html#l00261">Vector3.h:261</a></div></div>
<div class="ttc" id="afile__util_8h_html_ad4d6fa0365303d7ddecf8756c82cb6a8"><div class="ttname"><a href="file__util_8h.html#ad4d6fa0365303d7ddecf8756c82cb6a8">file_list</a></div><div class="ttdeci">vector&lt; string &gt; file_list(string path)</div><div class="ttdoc">Returns a list of files in the requested directory.</div><div class="ttdef"><b>Definition:</b> <a href="file__util_8cpp_source.html#l00176">file_util.cpp:176</a></div></div>
<div class="ttc" id="amg__processing_8h_html_a9b8250bcd3dbae566bd5ef8a6089b1cfa065fec74420cd18346040e497d71993b"><div class="ttname"><a href="mg__processing_8h.html#a9b8250bcd3dbae566bd5ef8a6089b1cfa065fec74420cd18346040e497d71993b">FOM</a></div><div class="ttdeci">@ FOM</div><div class="ttdef"><b>Definition:</b> <a href="mg__processing_8h_source.html#l00040">mg_processing.h:40</a></div></div>
<div class="ttc" id="amodel__neighbors_8h_html"><div class="ttname"><a href="model__neighbors_8h.html">model_neighbors.h</a></div><div class="ttdoc">Functions to manipulate model component neighbors.</div></div>
<div class="ttc" id="amodel__neighbors_8h_html_abae973a7a0182c5f36da932d21141c5c"><div class="ttname"><a href="model__neighbors_8h.html#abae973a7a0182c5f36da932d21141c5c">model_set_neighbors</a></div><div class="ttdeci">int model_set_neighbors(Bmodel *model, int number)</div><div class="ttdoc">Sets the desired number of components as neighbors for each component.</div><div class="ttdef"><b>Definition:</b> <a href="model__neighbors_8cpp_source.html#l00028">model_neighbors.cpp:28</a></div></div>
<div class="ttc" id="amodel__poly_8h_html"><div class="ttname"><a href="model__poly_8h.html">model_poly.h</a></div><div class="ttdoc">Functions to manipulate polyhedral coordinate files.</div></div>
<div class="ttc" id="amodel__poly_8h_html_a69630144dc2a1a5c121d2ce88195a4de"><div class="ttname"><a href="model__poly_8h.html#a69630144dc2a1a5c121d2ce88195a4de">model_poly_generate</a></div><div class="ttdeci">int model_poly_generate(Bmodel *model)</div><div class="ttdoc">Generates polygons based on a vertex network.</div><div class="ttdef"><b>Definition:</b> <a href="model__poly_8cpp_source.html#l00144">model_poly.cpp:144</a></div></div>
<div class="ttc" id="arwmodel_8h_html"><div class="ttname"><a href="rwmodel_8h.html">rwmodel.h</a></div><div class="ttdoc">Header file for reading and writing atomic model files.</div></div>
<div class="ttc" id="arwmodel_8h_html_afe6df6a836d297d3ffce4b764f2f2602"><div class="ttname"><a href="rwmodel_8h.html#afe6df6a836d297d3ffce4b764f2f2602">link_add</a></div><div class="ttdeci">Blink * link_add(Blink **link, Bcomponent *comp1, Bcomponent *comp2, double length, double radius)</div><div class="ttdoc">Adds a component link to a linked list.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel_8cpp_source.html#l00216">rwmodel.cpp:216</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a0380ac1e0e9b33e44fab887c0b790f2c"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a0380ac1e0e9b33e44fab887c0b790f2c">bild_color</a></div><div class="ttdeci">void bild_color(ofstream &amp;fbld, RGB&lt; float &gt; rgb)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00190">rwmodel_bild.cpp:190</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a0b2caeb4b6f130be43e5a2f0267dd453"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a></div><div class="ttdeci">int verbose</div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a0b6c27c31979b64a961b23a34b31789f"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a0b6c27c31979b64a961b23a34b31789f">model_to_bild_neighbor_planes</a></div><div class="ttdeci">int model_to_bild_neighbor_planes(Bstring &amp;filename, Bmodel *model, int color_type)</div><div class="ttdoc">Converts a model into a bild neighbor plane representation.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00684">rwmodel_bild.cpp:684</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a177ac8e7facf754b5e03e3547c2f749c"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a177ac8e7facf754b5e03e3547c2f749c">model_to_bild_force_vectors</a></div><div class="ttdeci">int model_to_bild_force_vectors(Bstring &amp;filename, Bmodel *model, int color_type)</div><div class="ttdoc">Converts a model into a representation with views.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00457">rwmodel_bild.cpp:457</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a1f77585fa443a8492d5273060cdb0a51"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a1f77585fa443a8492d5273060cdb0a51">bild_polygon_end</a></div><div class="ttdeci">void bild_polygon_end(ofstream &amp;fbld, Vector3&lt; double &gt; vertex)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00220">rwmodel_bild.cpp:220</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a35269022e5a7c8023d82b72a632f39c5"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a35269022e5a7c8023d82b72a632f39c5">model_to_bild_polygons</a></div><div class="ttdeci">int model_to_bild_polygons(Bstring &amp;filename, Bmodel *model, int color_type)</div><div class="ttdoc">Converts a model into a bild polygon representation.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00614">rwmodel_bild.cpp:614</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a4020c99244d64626c676ddedced14956"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a4020c99244d64626c676ddedced14956">component_add_if_not_exist</a></div><div class="ttdeci">Bcomponent * component_add_if_not_exist(Vector3&lt; double &gt; loc, Bcomponent **comp, int &amp;number)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00022">rwmodel_bild.cpp:22</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a4860aaca357985b9d9efce7a48ad70ee"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a4860aaca357985b9d9efce7a48ad70ee">read_model_bild</a></div><div class="ttdeci">Bmodel * read_model_bild(Bstring *file_list)</div><div class="ttdoc">Reads Chimera BILD model parameters.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00047">rwmodel_bild.cpp:47</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a655aeba2ef77a2eb1b0f84f982fc280c"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a655aeba2ef77a2eb1b0f84f982fc280c">bild_polygon_add</a></div><div class="ttdeci">void bild_polygon_add(ofstream &amp;fbld, Vector3&lt; double &gt; vertex)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00216">rwmodel_bild.cpp:216</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_a935335a6a7028b07f7c6367d40d30268"><div class="ttname"><a href="rwmodel__bild_8cpp.html#a935335a6a7028b07f7c6367d40d30268">bild_sphere</a></div><div class="ttdeci">void bild_sphere(ofstream &amp;fbld, Vector3&lt; double &gt; loc, double radius)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00200">rwmodel_bild.cpp:200</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_aaa25e0d3aefc1f684751c7ee914c7231"><div class="ttname"><a href="rwmodel__bild_8cpp.html#aaa25e0d3aefc1f684751c7ee914c7231">bild_arrow</a></div><div class="ttdeci">void bild_arrow(ofstream &amp;fbld, Vector3&lt; double &gt; start, Vector3&lt; double &gt; end, double cylrad, double conerad, double rho)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00225">rwmodel_bild.cpp:225</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_abdb2fe00ab1a841720f4eb92aee04ff2"><div class="ttname"><a href="rwmodel__bild_8cpp.html#abdb2fe00ab1a841720f4eb92aee04ff2">model_to_bild_view_sphere</a></div><div class="ttdeci">int model_to_bild_view_sphere(Bstring &amp;filename, Bmodel *model, int color_type)</div><div class="ttdoc">Converts a model into a representation with views.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00374">rwmodel_bild.cpp:374</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_add824c3e86aef28373d379afae4c8ece"><div class="ttname"><a href="rwmodel__bild_8cpp.html#add824c3e86aef28373d379afae4c8ece">bild_cylinder</a></div><div class="ttdeci">void bild_cylinder(ofstream &amp;fbld, Vector3&lt; double &gt; start, Vector3&lt; double &gt; end, double radius)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00205">rwmodel_bild.cpp:205</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_ae6bab230a8bd45a44739abefc70e9ef3"><div class="ttname"><a href="rwmodel__bild_8cpp.html#ae6bab230a8bd45a44739abefc70e9ef3">model_to_bild_orientations</a></div><div class="ttdeci">int model_to_bild_orientations(Bstring &amp;filename, Bmodel *model, int vec_type, int color_type)</div><div class="ttdoc">Converts a model into a representation with views.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00287">rwmodel_bild.cpp:287</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_aee5f32ef4b7ede2128e09c96be9aed97"><div class="ttname"><a href="rwmodel__bild_8cpp.html#aee5f32ef4b7ede2128e09c96be9aed97">write_model_bild</a></div><div class="ttdeci">int write_model_bild(Bstring &amp;filename, Bmodel *model)</div><div class="ttdoc">Writes Chimera BILD model parameters.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00238">rwmodel_bild.cpp:238</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_af1ee3ccc41014a49f7f6961f6dcdba0e"><div class="ttname"><a href="rwmodel__bild_8cpp.html#af1ee3ccc41014a49f7f6961f6dcdba0e">bild_polygon_start</a></div><div class="ttdeci">void bild_polygon_start(ofstream &amp;fbld, Vector3&lt; double &gt; vertex)</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00212">rwmodel_bild.cpp:212</a></div></div>
<div class="ttc" id="arwmodel__bild_8cpp_html_af6738624ffd062eb05a425684928a8d1"><div class="ttname"><a href="rwmodel__bild_8cpp.html#af6738624ffd062eb05a425684928a8d1">model_to_bild_view_polygons</a></div><div class="ttdeci">int model_to_bild_view_polygons(Bstring &amp;filename, Bmodel *model, int order, int color_type)</div><div class="ttdoc">Converts a model into a representation with view polygons.</div><div class="ttdef"><b>Definition:</b> <a href="rwmodel__bild_8cpp_source.html#l00535">rwmodel_bild.cpp:535</a></div></div>
<div class="ttc" id="astring__util_8h_html"><div class="ttname"><a href="string__util_8h.html">string_util.h</a></div></div>
<div class="ttc" id="astring__util_8h_html_a21228818f6b97bdd706d7980b74a2966"><div class="ttname"><a href="string__util_8h.html#a21228818f6b97bdd706d7980b74a2966">split</a></div><div class="ttdeci">vector&lt; string &gt; split(const string &amp;s)</div><div class="ttdoc">Splits a string on whitespace.</div><div class="ttdef"><b>Definition:</b> <a href="string__util_8cpp_source.html#l00128">string_util.cpp:128</a></div></div>
<div class="ttc" id="atimer_8h_html"><div class="ttname"><a href="timer_8h.html">timer.h</a></div><div class="ttdoc">Utilities for timing functions.</div></div>
<div class="ttc" id="autilities_8h_html"><div class="ttname"><a href="utilities_8h.html">utilities.h</a></div><div class="ttdoc">Header file for general utilities.</div></div>
<div class="ttc" id="autilities_8h_html_a0472bdfea57c833b4eaba94f1ee0b781"><div class="ttname"><a href="utilities_8h.html#a0472bdfea57c833b4eaba94f1ee0b781">VERB_LABEL</a></div><div class="ttdeci">#define VERB_LABEL</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8h_source.html#l00113">utilities.h:113</a></div></div>
<div class="ttc" id="autilities_8h_html_a4912c64aec0c943b7985db6cb61ff83a"><div class="ttname"><a href="utilities_8h.html#a4912c64aec0c943b7985db6cb61ff83a">TWOPI</a></div><div class="ttdeci">#define TWOPI</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8h_source.html#l00075">utilities.h:75</a></div></div>
<div class="ttc" id="autilities_8h_html_a65f0019f3f7f7b04cd45d68f60afe385"><div class="ttname"><a href="utilities_8h.html#a65f0019f3f7f7b04cd45d68f60afe385">VERB_DEBUG</a></div><div class="ttdeci">#define VERB_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8h_source.html#l00119">utilities.h:119</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f347dd41100e820f728e8b665c3b5705.html">rwmodel</a></li><li class="navelem"><a class="el" href="rwmodel__bild_8cpp.html">rwmodel_bild.cpp</a></li>
    <li class="footer">Generated on Wed Sep 1 2021 09:22:02 for Bsoft by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
